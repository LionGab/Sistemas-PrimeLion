let numbersAnimated=!1;function animateNumbers(){if(numbersAnimated)return;const t=document.querySelectorAll(".proof-number");numbersAnimated=!0,t.forEach(t=>{const e=parseInt(t.getAttribute("data-target")),n=performance.now();!function a(o){const r=o-n,i=Math.min(r/2e3,1),s=1-Math.pow(1-i,3),c=Math.floor(e*s);t.textContent=c,i<1&&requestAnimationFrame(a)}(performance.now())})}const AnimationController={animateSlide(){document.querySelectorAll(".animate-slide").forEach((t,e)=>{try{setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},200*e)}catch(t){console.error("Slide animation error:",t)}})},animateFade(){const t=document.querySelector(".animate-fade");if(t)try{setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},500)}catch(t){console.error("Fade animation error:",t)}}};let globalObserver;function initScrollAnimations(){const t={threshold:.1,rootMargin:"0px 0px -50px 0px"};globalObserver=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting)try{t.target.classList.contains("social-proof")&&setTimeout(()=>animateNumbers(),200),t.target.classList.contains("benefits")&&setTimeout(()=>AnimationController.animateSlide(),200),t.target.classList.add("visible"),globalObserver.unobserve(t.target)}catch(t){console.error("Animation error:",t)}})},t),document.querySelectorAll(".social-proof, .benefits, .testimonials").forEach(t=>{globalObserver.observe(t)})}function initCTAEffects(){document.querySelectorAll(".cta-primary").forEach(t=>{t.addEventListener("mouseenter",function(){window.matchMedia("(prefers-reduced-motion: reduce)").matches||(this.style.transform="scale(1.05)",this.style.boxShadow="0 10px 25px rgba(212, 175, 55, 0.3)")}),t.addEventListener("mouseleave",function(){this.style.transform="scale(1)",this.style.boxShadow="0 5px 15px rgba(212, 175, 55, 0.2)"}),t.hasAttribute("data-cta")||t.setAttribute("data-cta",`${(t.closest("section")?t.closest("section").className.split(" ")[0]:"unknown")}-cta`)})}function initFAQ(){document.querySelectorAll(".faq-item").forEach(t=>{const e=t.querySelector(".faq-question"),n=t.querySelector(".faq-answer"),a=document.createElement("span");a.className="faq-indicator",a.textContent="+",a.style.cssText="\n            float: right;\n            font-size: 20px;\n            font-weight: bold;\n            color: var(--gold, #D4AF37);\n            transition: transform 0.3s ease;\n        ",e.appendChild(a),n.style.display="none",n.style.maxHeight="0",n.style.overflow="hidden",n.style.transition="max-height 0.3s ease, padding 0.3s ease",e.style.cursor="pointer",e.style.userSelect="none",e.style.display="flex",e.style.justifyContent="space-between",e.style.alignItems="center",e.addEventListener("click",()=>{const o="block"===n.style.display;document.querySelectorAll(".faq-item").forEach(t=>{const e=t.querySelector(".faq-answer"),n=t.querySelector(".faq-indicator");e.style.display="none",e.style.maxHeight="0",e.style.paddingTop="0",t.classList.remove("active"),n&&(n.textContent="+",n.style.transform="rotate(0deg)")}),o||(n.style.display="block",n.style.maxHeight=n.scrollHeight+"px",n.style.paddingTop="15px",t.classList.add("active"),a.textContent="−",a.style.transform="rotate(180deg)")})})}function initWhatsAppButton(){const t=document.createElement("div");t.id="whatsapp-float",t.innerHTML='\n        <a href="https://wa.me/5511999999999?text=Ol%C3%A1!%20Quero%20saber%20mais%20sobre%20o%20Sprint%20de%20Diagn%C3%B3stico%20Gratuito" \n           target="_blank" \n           rel="noopener"\n           data-cta="whatsapp-float">\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">\n                <path d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21 5.46 0 9.91-4.45 9.91-9.91S17.5 2 12.04 2M8.53 7.33c.16 0 .33-.01.47.01.16.01.35-.06.55.42.2.48 1.02 2.58 1.11 2.76.09.18.15.39.03.63-.12.24-.18.39-.36.6-.18.21-.38.47-.54.63-.18.18-.36.39-.15.72.21.33.93 1.44 2 2.13 1.38 1 2.53 1.31 2.88 1.45.36.15.57.12.78-.06.21-.18.93-.99 1.17-1.33.24-.33.48-.27.81-.15.33.12 2.1 1.05 2.46 1.23.36.18.6.27.69.42.09.15.09.84-.21 1.65-.3.81-1.74 1.62-2.4 1.68-.63.06-1.29-.06-4.27-1.11C6.15 14.29 4.07 10.53 3.9 10.26c-.18-.27-1.35-1.92-1.35-3.66 0-1.74.87-2.6 1.17-2.96.33-.36.72-.48 1.05-.48l.76.01z"/>\n            </svg>\n        </a>\n    ',t.style.cssText="\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        z-index: 1000;\n        animation: pulse-whatsapp 2s infinite;\n    ",t.querySelector("a").style.cssText="\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 60px;\n        height: 60px;\n        background: #25D366;\n        border-radius: 50%;\n        box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);\n        text-decoration: none;\n        transition: all 0.3s ease;\n    ",document.body.appendChild(t)}function initFallbackForm(){const t=document.createElement("div");t.id="fallback-form",t.innerHTML='\n        <div class="form-overlay" style="display: none;">\n            <div class="form-modal">\n                <h3>Agende Seu Diagnóstico Gratuito</h3>\n                <p>Preencha os dados e entraremos em contato:</p>\n                <form id="lead-form">\n                    <input type="text" name="nome" placeholder="Seu nome" required>\n                    <input type="email" name="email" placeholder="Seu melhor e-mail" required>\n                    <input type="tel" name="telefone" placeholder="WhatsApp" required>\n                    <select name="faturamento" required>\n                        <option value="">Faturamento atual</option>\n                        <option value="500k-1m">R$ 500k - 1M</option>\n                        <option value="1m-5m">R$ 1M - 5M</option>\n                        <option value="5m+">R$ 5M+</option>\n                    </select>\n                    <button type="submit" data-cta="form-fallback">Quero Meu Diagnóstico →</button>\n                </form>\n                <button class="close-form">✕</button>\n            </div>\n        </div>\n    ',document.body.appendChild(t);const e=t.querySelector(".form-overlay"),n=t.querySelector(".close-form");t.querySelector("#lead-form");n.addEventListener("click",()=>e.style.display="none"),e.addEventListener("click",t=>{t.target===e&&(e.style.display="none")}),setTimeout(()=>{Math.random()>.9&&(e.style.display="flex")},5e3)}function smoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){try{t.preventDefault();const e=document.querySelector(this.getAttribute("href"));e&&e.scrollIntoView({behavior:"smooth",block:"start"})}catch(t){console.error("Smooth scroll error:",t)}})})}function initTracking(){const t=[25,50,75,100],e=new Set,n=throttle(()=>{const n=Math.round((window.scrollY+window.innerHeight)/document.body.offsetHeight*100);t.forEach(t=>{if(n>=t&&!e.has(t)){e.add(t),"undefined"!=typeof gtag&&gtag("event","scroll",{event_category:"engagement",event_label:`${t}%`,value:t}),"undefined"!=typeof fbq&&fbq("trackCustom","ScrollDepth",{depth:`${t}%`})}})},500);window.addEventListener("scroll",n),document.querySelectorAll("[data-cta]").forEach(t=>{t.addEventListener("click",t=>{const e=t.target.getAttribute("data-cta")||t.target.closest("[data-cta]")?.getAttribute("data-cta");try{"undefined"!=typeof gtag&&gtag("event","click",{event_category:"CTA",event_label:e,cta_position:e}),"undefined"!=typeof fbq&&fbq("track","Lead",{source:e}),"undefined"!=typeof dataLayer&&dataLayer.push({event:"cta_click",cta_name:e,page_location:window.location.href})}catch(t){console.error("Tracking error:",t)}})})}function initLazyLoading(){if("IntersectionObserver"in window){const t=new IntersectionObserver((t,e)=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;n.src=n.dataset.src,n.classList.remove("lazy"),e.unobserve(n)}})});document.querySelectorAll("img[data-src]").forEach(e=>{t.observe(e)})}}function preventMobileZoom(){document.querySelectorAll("input, select, textarea").forEach(t=>{t.addEventListener("focus",()=>{const t=document.querySelector('meta[name="viewport"]');t&&t.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")}),t.addEventListener("blur",()=>{const t=document.querySelector('meta[name="viewport"]');t&&t.setAttribute("content","width=device-width, initial-scale=1.0")})})}function throttle(t,e){let n;return function(){const a=arguments,o=this;n||(t.apply(o,a),n=!0,setTimeout(()=>n=!1,e))}}function debounce(t,e){let n;return function(...a){const o=()=>{clearTimeout(n),t(...a)};clearTimeout(n),n=setTimeout(o,e)}}let isMobile=window.innerWidth<=768,ticking=!1;function initFacebookPixel(){if("undefined"==typeof fbq){!function(t,e,n,a,o,r,i){if(t.fbq)return;o=t.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},t._fbq||(t._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],r=e.createElement(n),r.async=!0,r.src=a,i=e.getElementsByTagName(n)[0],i.parentNode.insertBefore(r,i)}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","YOUR_PIXEL_ID"),fbq("track","PageView")}}window.addEventListener("resize",debounce(()=>{isMobile=window.innerWidth<=768},250)),window.addEventListener("scroll",throttle(()=>{if(!isMobile&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches){const t=.3*window.pageYOffset,e=document.querySelector(".hero");e&&window.pageYOffset<window.innerHeight&&(e.style.transform=`translateY(${t}px)`)}},16)),document.addEventListener("DOMContentLoaded",function(){try{AnimationController.animateFade(),initScrollAnimations(),initCTAEffects(),initFAQ(),initWhatsAppButton(),initFallbackForm(),smoothScroll(),initTracking(),initFacebookPixel(),initLazyLoading(),preventMobileZoom(),document.body.classList.add("loaded")}catch(t){console.error("Initialization error:",t)}});