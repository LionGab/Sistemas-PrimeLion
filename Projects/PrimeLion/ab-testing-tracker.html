<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A/B Testing Tracker - LinkedIn Naming Strategy</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0077b5 0%, #00a0dc 100%);
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 {
            color: #0077b5;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .control-group {
            flex: 1;
            min-width: 200px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #4a5568;
            font-weight: 600;
        }
        input, select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #0077b5;
        }
        button {
            background: linear-gradient(135deg, #0077b5, #00a0dc);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s;
        }
        button:hover {
            transform: scale(1.05);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th {
            background: #f7fafc;
            padding: 12px;
            text-align: left;
            color: #2d3748;
            font-weight: 600;
            border-bottom: 2px solid #e2e8f0;
        }
        td {
            padding: 10px 12px;
            border-bottom: 1px solid #e2e8f0;
        }
        tr:hover {
            background: #f7fafc;
        }
        .metric {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .trend-up {
            color: #48bb78;
            font-weight: bold;
        }
        .trend-down {
            color: #f56565;
            font-weight: bold;
        }
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .summary-card {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .summary-card h3 {
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 14px;
        }
        .summary-card .value {
            font-size: 28px;
            font-weight: bold;
            color: #0077b5;
        }
        .chart-container {
            margin-top: 30px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 10px;
        }
        .export-btn {
            background: #48bb78;
            margin-top: 20px;
        }
        .clear-btn {
            background: #f56565;
            margin-top: 20px;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä A/B Testing Tracker - 8 Semanas</h1>
        
        <div class="controls">
            <div class="control-group">
                <label>Semana</label>
                <select id="week">
                    <option value="1">Semana 1</option>
                    <option value="2">Semana 2</option>
                    <option value="3">Semana 3</option>
                    <option value="4">Semana 4</option>
                    <option value="5">Semana 5</option>
                    <option value="6">Semana 6</option>
                    <option value="7">Semana 7</option>
                    <option value="8">Semana 8</option>
                </select>
            </div>
            
            <div class="control-group">
                <label>Vers√£o Testada</label>
                <select id="version">
                    <option value="Sistema ROI 3X">Sistema ROI 3X</option>
                    <option value="Framework Escala Validado">Framework Escala Validado</option>
                    <option value="Acelera√ß√£o Receita Recorrente">Acelera√ß√£o Receita Recorrente</option>
                    <option value="Consultoria Alta Performance">Consultoria Alta Performance</option>
                    <option value="Transforma√ß√£o Executiva 90 Dias">Transforma√ß√£o Executiva 90 Dias</option>
                </select>
            </div>
            
            <div class="control-group">
                <label>Views do Perfil</label>
                <input type="number" id="views" placeholder="Ex: 450">
            </div>
            
            <div class="control-group">
                <label>Conex√µes Aceitas</label>
                <input type="number" id="connections" placeholder="Ex: 35">
            </div>
            
            <div class="control-group">
                <label>Mensagens Recebidas</label>
                <input type="number" id="messages" placeholder="Ex: 12">
            </div>
            
            <div class="control-group">
                <label>Convers√µes (Calls)</label>
                <input type="number" id="conversions" placeholder="Ex: 3">
            </div>
            
            <div class="control-group" style="display: flex; align-items: flex-end;">
                <button onclick="addData()">‚ûï Adicionar Dados</button>
            </div>
        </div>
        
        <table id="dataTable">
            <thead>
                <tr>
                    <th>Semana</th>
                    <th>Vers√£o</th>
                    <th>Views</th>
                    <th>Conex√µes</th>
                    <th>Taxa Conex√£o</th>
                    <th>Mensagens</th>
                    <th>Taxa Mensagem</th>
                    <th>Convers√µes</th>
                    <th>Taxa Convers√£o</th>
                </tr>
            </thead>
            <tbody id="tableBody">
            </tbody>
        </table>
        
        <div class="summary" id="summary">
            <div class="summary-card">
                <h3>MELHOR TAXA CONEX√ÉO</h3>
                <div class="value" id="bestConnection">-</div>
            </div>
            <div class="summary-card">
                <h3>MELHOR TAXA MENSAGEM</h3>
                <div class="value" id="bestMessage">-</div>
            </div>
            <div class="summary-card">
                <h3>MELHOR CONVERS√ÉO</h3>
                <div class="value" id="bestConversion">-</div>
            </div>
            <div class="summary-card">
                <h3>VENCEDOR GERAL</h3>
                <div class="value" id="winner" style="font-size: 18px;">-</div>
            </div>
        </div>
        
        <div class="chart-container">
            <h2>üìà Evolu√ß√£o Semanal</h2>
            <canvas id="evolutionChart" height="100"></canvas>
        </div>
        
        <div>
            <button class="export-btn" onclick="exportData()">üì• Exportar CSV</button>
            <button class="clear-btn" onclick="clearData()">üóëÔ∏è Limpar Dados</button>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        let testData = JSON.parse(localStorage.getItem('abTestData')) || [];
        
        function addData() {
            const week = document.getElementById('week').value;
            const version = document.getElementById('version').value;
            const views = parseInt(document.getElementById('views').value) || 0;
            const connections = parseInt(document.getElementById('connections').value) || 0;
            const messages = parseInt(document.getElementById('messages').value) || 0;
            const conversions = parseInt(document.getElementById('conversions').value) || 0;
            
            if (views === 0) {
                alert('Por favor, insira pelo menos o n√∫mero de views');
                return;
            }
            
            const data = {
                week,
                version,
                views,
                connections,
                messages,
                conversions,
                connectionRate: ((connections / views) * 100).toFixed(2),
                messageRate: ((messages / connections) * 100).toFixed(2),
                conversionRate: ((conversions / views) * 100).toFixed(2)
            };
            
            testData.push(data);
            localStorage.setItem('abTestData', JSON.stringify(testData));
            renderTable();
            updateSummary();
            updateChart();
            
            // Clear inputs
            document.getElementById('views').value = '';
            document.getElementById('connections').value = '';
            document.getElementById('messages').value = '';
            document.getElementById('conversions').value = '';
        }
        
        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = testData.map(row => `
                <tr>
                    <td>Semana ${row.week}</td>
                    <td><strong>${row.version}</strong></td>
                    <td>${row.views}</td>
                    <td>${row.connections}</td>
                    <td class="${row.connectionRate > 7 ? 'trend-up' : 'trend-down'}">${row.connectionRate}%</td>
                    <td>${row.messages}</td>
                    <td class="${row.messageRate > 30 ? 'trend-up' : 'trend-down'}">${row.messageRate}%</td>
                    <td>${row.conversions}</td>
                    <td class="${row.conversionRate > 0.5 ? 'trend-up' : 'trend-down'}">${row.conversionRate}%</td>
                </tr>
            `).join('');
        }
        
        function updateSummary() {
            if (testData.length === 0) return;
            
            const bestConn = testData.reduce((prev, current) => 
                parseFloat(prev.connectionRate) > parseFloat(current.connectionRate) ? prev : current
            );
            const bestMsg = testData.reduce((prev, current) => 
                parseFloat(prev.messageRate) > parseFloat(current.messageRate) ? prev : current
            );
            const bestConv = testData.reduce((prev, current) => 
                parseFloat(prev.conversionRate) > parseFloat(current.conversionRate) ? prev : current
            );
            
            document.getElementById('bestConnection').textContent = bestConn.version.split(' ')[0];
            document.getElementById('bestMessage').textContent = bestMsg.version.split(' ')[0];
            document.getElementById('bestConversion').textContent = bestConv.version.split(' ')[0];
            document.getElementById('winner').textContent = bestConv.version;
        }
        
        function updateChart() {
            const ctx = document.getElementById('evolutionChart').getContext('2d');
            const weeks = [...new Set(testData.map(d => `Semana ${d.week}`))];
            const versions = [...new Set(testData.map(d => d.version))];
            
            const datasets = versions.map((version, index) => {
                const color = ['#0077b5', '#48bb78', '#ed8936', '#9f7aea', '#f56565'][index];
                return {
                    label: version,
                    data: weeks.map(week => {
                        const weekNum = week.split(' ')[1];
                        const item = testData.find(d => d.week == weekNum && d.version === version);
                        return item ? parseFloat(item.conversionRate) : null;
                    }),
                    borderColor: color,
                    backgroundColor: color + '20',
                    tension: 0.4
                };
            });
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: weeks,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Taxa de Convers√£o por Vers√£o'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function exportData() {
            let csv = 'Semana,Vers√£o,Views,Conex√µes,Taxa Conex√£o,Mensagens,Taxa Mensagem,Convers√µes,Taxa Convers√£o\n';
            testData.forEach(row => {
                csv += `${row.week},${row.version},${row.views},${row.connections},${row.connectionRate}%,${row.messages},${row.messageRate}%,${row.conversions},${row.conversionRate}%\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ab-testing-linkedin.csv';
            a.click();
        }
        
        function clearData() {
            if (confirm('Tem certeza que deseja limpar todos os dados?')) {
                testData = [];
                localStorage.removeItem('abTestData');
                renderTable();
                location.reload();
            }
        }
        
        // Initial render
        renderTable();
        updateSummary();
        if (testData.length > 0) updateChart();
    </script>
</body>
</html>