<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Academia - WhatsApp Automation</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'academia-blue': '#1e40af',
                        'academia-green': '#10b981',
                        'academia-orange': '#f59e0b'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-academia-blue text-white p-4 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fas fa-dumbbell text-2xl"></i>
                <div>
                    <h1 class="text-xl font-bold">Full Force Academia</h1>
                    <p class="text-blue-200 text-sm">Dashboard WhatsApp Automation</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="text-right">
                    <p class="text-sm">Status Sistema</p>
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                        <span class="text-green-300 text-sm font-semibold">ONLINE</span>
                    </div>
                </div>
                <i class="fas fa-user-circle text-2xl"></i>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto p-6">
        <!-- Status Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- WhatsApp Status -->
            <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm font-medium">WhatsApp Status</p>
                        <p class="text-2xl font-bold text-green-600">CONECTADO</p>
                        <p class="text-xs text-gray-500">Última sync: 2 min atrás</p>
                    </div>
                    <div class="bg-green-100 p-3 rounded-full">
                        <i class="fab fa-whatsapp text-green-600 text-xl"></i>
                    </div>
                </div>
            </div>

            <!-- Mensagens Hoje -->
            <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm font-medium">Mensagens Hoje</p>
                        <p class="text-2xl font-bold text-blue-600" id="mensagensHoje">47</p>
                        <p class="text-xs text-green-500">↗ +12% vs ontem</p>
                    </div>
                    <div class="bg-blue-100 p-3 rounded-full">
                        <i class="fas fa-paper-plane text-blue-600 text-xl"></i>
                    </div>
                </div>
            </div>

            <!-- Reativações Este Mês -->
            <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm font-medium">Reativações Mês</p>
                        <p class="text-2xl font-bold text-orange-600" id="reativacoesMes">23</p>
                        <p class="text-xs text-green-500">↗ +35% vs mês anterior</p>
                    </div>
                    <div class="bg-orange-100 p-3 rounded-full">
                        <i class="fas fa-user-plus text-orange-600 text-xl"></i>
                    </div>
                </div>
            </div>

            <!-- ROI Mensal -->
            <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm font-medium">ROI Mensal</p>
                        <p class="text-2xl font-bold text-purple-600" id="roiMensal">R$ 8.420</p>
                        <p class="text-xs text-green-500">↗ ROI de 1.247%</p>
                    </div>
                    <div class="bg-purple-100 p-3 rounded-full">
                        <i class="fas fa-chart-line text-purple-600 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <!-- Mensagens por Tipo -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-chart-pie mr-2 text-blue-600"></i>
                    Mensagens por Tipo (7 dias)
                </h3>
                <canvas id="messageTypeChart"></canvas>
            </div>

            <!-- Taxa de Conversão -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-chart-bar mr-2 text-green-600"></i>
                    Taxa de Conversão
                </h3>
                <canvas id="conversionChart"></canvas>
            </div>
        </div>

        <!-- Real-time Activity & Alerts -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <!-- Atividade em Tempo Real -->
            <div class="lg:col-span-2 bg-white rounded-xl shadow-md p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-clock mr-2 text-blue-600"></i>
                    Atividade em Tempo Real
                    <div class="ml-auto flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                        <span class="text-xs text-green-600">LIVE</span>
                    </div>
                </h3>
                <div id="realTimeActivity" class="space-y-3 max-h-64 overflow-y-auto">
                    <!-- Activity items will be populated by JavaScript -->
                </div>
            </div>

            <!-- Alertas e Notificações -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-bell mr-2 text-orange-600"></i>
                    Alertas
                    <span class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full">3</span>
                </h3>
                <div class="space-y-3">
                    <div class="flex items-start space-x-3 p-3 bg-red-50 rounded-lg border-l-4 border-red-400">
                        <i class="fas fa-exclamation-triangle text-red-500 mt-1"></i>
                        <div>
                            <p class="text-sm font-medium text-red-800">Rate Limit Alert</p>
                            <p class="text-xs text-red-600">Próximo do limite: 89/100 mensagens/hora</p>
                            <p class="text-xs text-gray-500">há 5 min</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3 p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-400">
                        <i class="fas fa-user-times text-yellow-500 mt-1"></i>
                        <div>
                            <p class="text-sm font-medium text-yellow-800">Membro Não Respondeu</p>
                            <p class="text-xs text-yellow-600">João Silva - 3ª tentativa sem resposta</p>
                            <p class="text-xs text-gray-500">há 2 horas</p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-3 p-3 bg-green-50 rounded-lg border-l-4 border-green-400">
                        <i class="fas fa-check-circle text-green-500 mt-1"></i>
                        <div>
                            <p class="text-sm font-medium text-green-800">Meta Atingida!</p>
                            <p class="text-xs text-green-600">25 reativações este mês (+25% da meta)</p>
                            <p class="text-xs text-gray-500">há 30 min</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Member Status Table -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-8">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-gray-800 flex items-center">
                    <i class="fas fa-users mr-2 text-blue-600"></i>
                    Membros em Processo de Reativação
                </h3>
                <button class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors">
                    <i class="fas fa-download mr-2"></i>Exportar Lista
                </button>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full table-auto">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Membro</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Dias Inativo</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Última Mensagem</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Próxima Ação</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="membersTable">
                        <!-- Table rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-white rounded-xl shadow-md p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-rocket mr-2 text-purple-600"></i>
                Ações Rápidas
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <button class="bg-green-600 text-white p-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2">
                    <i class="fas fa-play"></i>
                    <span>Iniciar Campanha</span>
                </button>
                
                <button class="bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2">
                    <i class="fas fa-upload"></i>
                    <span>Importar Membros</span>
                </button>
                
                <button class="bg-orange-600 text-white p-4 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-2">
                    <i class="fas fa-chart-line"></i>
                    <span>Relatório Completo</span>
                </button>
                
                <button class="bg-purple-600 text-white p-4 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center space-x-2">
                    <i class="fas fa-cog"></i>
                    <span>Configurações</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Simulate real-time updates
        function updateRealTimeActivity() {
            const activities = [
                { icon: 'fa-paper-plane', color: 'blue', message: 'Mensagem enviada para Maria Silva', time: 'agora' },
                { icon: 'fa-user-plus', color: 'green', message: 'João Santos reativou sua matrícula', time: '2 min' },
                { icon: 'fa-reply', color: 'orange', message: 'Ana Costa respondeu à mensagem de reativação', time: '5 min' },
                { icon: 'fa-calendar', color: 'purple', message: 'Lembrete de treino enviado para 15 membros', time: '10 min' },
                { icon: 'fa-chart-up', color: 'green', message: 'Meta mensal atingida: 25 reativações', time: '15 min' }
            ];

            const container = document.getElementById('realTimeActivity');
            container.innerHTML = '';

            activities.forEach(activity => {
                const activityElement = document.createElement('div');
                activityElement.className = 'flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors';
                activityElement.innerHTML = `
                    <div class="bg-${activity.color}-100 p-2 rounded-full">
                        <i class="fas ${activity.icon} text-${activity.color}-600"></i>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-gray-900">${activity.message}</p>
                        <p class="text-xs text-gray-500">${activity.time}</p>
                    </div>
                `;
                container.appendChild(activityElement);
            });
        }

        // Populate members table
        function populateMembersTable() {
            const members = [
                { name: 'João Silva', status: 'Reativação 30d', days: 32, lastMsg: 'Ontem às 14:30', nextAction: 'Oferta especial', priority: 'high' },
                { name: 'Maria Costa', status: 'Reativação 15d', days: 18, lastMsg: 'Hoje às 09:15', nextAction: 'Mensagem carinhosa', priority: 'medium' },
                { name: 'Carlos Santos', status: 'Reativação 60d', days: 61, lastMsg: '3 dias atrás', nextAction: 'Mensagem final', priority: 'low' },
                { name: 'Ana Oliveira', status: 'Respondeu', days: 25, lastMsg: 'Há 2 horas', nextAction: 'Agendar conversa', priority: 'high' },
                { name: 'Pedro Lima', status: 'Reativação 15d', days: 16, lastMsg: 'Hoje às 11:45', nextAction: 'Aguardar resposta', priority: 'medium' }
            ];

            const tbody = document.getElementById('membersTable');
            tbody.innerHTML = '';

            members.forEach(member => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const priorityColor = member.priority === 'high' ? 'red' : member.priority === 'medium' ? 'yellow' : 'green';
                const statusColor = member.status.includes('Respondeu') ? 'green' : member.status.includes('60d') ? 'red' : 'orange';
                
                row.innerHTML = `
                    <td class="px-4 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-${priorityColor}-400 rounded-full mr-3"></div>
                            <div class="text-sm font-medium text-gray-900">${member.name}</div>
                        </div>
                    </td>
                    <td class="px-4 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-${statusColor}-100 text-${statusColor}-800">
                            ${member.status}
                        </span>
                    </td>
                    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900">${member.days} dias</td>
                    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">${member.lastMsg}</td>
                    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900">${member.nextAction}</td>
                    <td class="px-4 py-4 whitespace-nowrap text-sm font-medium">
                        <button class="text-blue-600 hover:text-blue-900 mr-2">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="text-green-600 hover:text-green-900 mr-2">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                        <button class="text-orange-600 hover:text-orange-900">
                            <i class="fas fa-phone"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Initialize charts
        function initializeCharts() {
            // Message Type Chart
            const messageTypeCtx = document.getElementById('messageTypeChart').getContext('2d');
            new Chart(messageTypeCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Reativação', 'Lembretes', 'Pagamentos', 'Motivacionais'],
                    datasets: [{
                        data: [35, 30, 20, 15],
                        backgroundColor: ['#f59e0b', '#10b981', '#3b82f6', '#8b5cf6']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Conversion Chart
            const conversionCtx = document.getElementById('conversionChart').getContext('2d');
            new Chart(conversionCtx, {
                type: 'bar',
                data: {
                    labels: ['15 dias', '30 dias', '60 dias'],
                    datasets: [{
                        label: 'Taxa de Conversão (%)',
                        data: [45, 25, 10],
                        backgroundColor: ['#10b981', '#f59e0b', '#ef4444']
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 50
                        }
                    }
                }
            });
        }

        // Simulate real-time metric updates
        function updateMetrics() {
            // Update message count
            const mensagensElement = document.getElementById('mensagensHoje');
            const currentMessages = parseInt(mensagensElement.textContent);
            mensagensElement.textContent = currentMessages + Math.floor(Math.random() * 3);

            // Update reactivations
            const reativacoesElement = document.getElementById('reativacoesMes');
            if (Math.random() > 0.9) { // 10% chance to increment
                const currentReactivations = parseInt(reativacoesElement.textContent);
                reativacoesElement.textContent = currentReactivations + 1;
                
                // Update ROI
                const roiElement = document.getElementById('roiMensal');
                const currentROI = parseInt(roiElement.textContent.replace('R$ ', '').replace('.', ''));
                roiElement.textContent = `R$ ${(currentROI + 150).toLocaleString('pt-BR')}`;
            }
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            updateRealTimeActivity();
            populateMembersTable();
            initializeCharts();

            // Set up real-time updates
            setInterval(updateRealTimeActivity, 30000); // Update activity every 30 seconds
            setInterval(updateMetrics, 60000); // Update metrics every minute
        });
    </script>
</body>
</html>