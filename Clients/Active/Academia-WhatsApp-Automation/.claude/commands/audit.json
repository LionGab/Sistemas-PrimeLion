{
  "name": "audit",
  "description": "Auditoria completa do sistema WhatsApp Academia - Performance, Compliance, ROI",
  "params": {
    "type": {
      "type": "enum",
      "values": ["complete", "whatsapp", "compliance", "performance", "roi", "automation"],
      "default": "complete",
      "description": "Tipo de auditoria a executar"
    },
    "academy_id": {
      "type": "string",
      "description": "ID da academia para auditoria (opcional, usa padrão se não especificado)"
    },
    "days": {
      "type": "number",
      "default": 30,
      "description": "Período em dias para análise de métricas"
    },
    "format": {
      "type": "enum", 
      "values": ["json", "markdown", "executive", "dashboard"],
      "default": "executive",
      "description": "Formato do relatório de saída"
    }
  },
  "tasks": [
    "1) Validar conexão com sistema Academia WhatsApp Automation",
    "2) Executar auditoria conforme tipo especificado:",
    "   - complete: Auditoria abrangente (WhatsApp + Compliance + Performance + ROI + Automação)",
    "   - whatsapp: Performance WhatsApp (entrega, latência, erros)",
    "   - compliance: LGPD, consentimento, trilhas de auditoria", 
    "   - performance: Sistema, banco, filas, uptime",
    "   - roi: Receita, reativação, conversão, eficiência operacional",
    "   - automation: Fluxos de reativação, nurturing e billing",
    "3) Gerar relatório em formato especificado com métricas e recomendações",
    "4) Calcular score geral e identificar oportunidades de melhoria",
    "5) Salvar relatório em audit_results/ para referência futura"
  ],
  "outputs": {
    "executive": "Relatório executivo com dashboard visual e ROI",
    "technical": "Análise técnica detalhada com métricas específicas", 
    "recommendations": "Lista priorizada de melhorias com impacto estimado",
    "dashboard": "Dashboard interativo com métricas em tempo real"
  },
  "success_criteria": [
    "Score de auditoria > 80% para sistemas em produção",
    "Compliance LGPD = 100%",
    "Taxa de entrega WhatsApp > 95%", 
    "ROI mensal > 200%",
    "Tempo de resposta < 3 segundos",
    "Recomendações priorizadas por impacto"
  ],
  "integration": {
    "api_endpoints": [
      "POST /api/audit/complete",
      "POST /api/audit/whatsapp", 
      "POST /api/audit/compliance",
      "POST /api/audit/performance",
      "POST /api/audit/roi",
      "GET /api/audit/dashboard"
    ],
    "dependencies": [
      "AuditController",
      "WhatsAppBusinessConnector",
      "ReactivationMCP",
      "NurturingMCP", 
      "BillingController"
    ]
  }
}